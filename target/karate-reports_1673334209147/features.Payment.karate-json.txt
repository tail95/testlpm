{"failedCount":0,"prefixedPath":"classpath:features\/Payment.feature","packageQualifiedName":"features.Payment","loopIndex":-1,"relativePath":"features\/Payment.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":41960200,"millis":41.9602,"status":"passed"},"step":{"background":true,"line":3,"prefix":"*","index":0,"text":"configure headers = { \"X-LP-AUTOTEST-NAME\": \"features\/Payment.feature\" }"}},{"result":{"nanos":53177200,"millis":53.1772,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseURI = \"http:\/\/api-pay.line-apps-beta.com:8080\""}},{"result":{"nanos":802900,"millis":0.8029,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def paymentsBaseURI = \"https:\/\/api-pay.line-beta.me:443\""}},{"result":{"nanos":705700,"millis":0.7057,"status":"passed"},"step":{"comments":["# 계정 정보"],"background":true,"line":10,"prefix":"*","index":3,"text":"def mid = \"u00d5f3a707a98b67e13f342c8530601a\""}},{"result":{"nanos":2551700,"millis":2.5517,"status":"passed"},"step":{"comments":["# 결제 정보"],"background":true,"line":12,"prefix":"*","index":4,"text":"def amount = 539"}},{"result":{"nanos":793200,"millis":0.7932,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":5,"text":"def currency = \"TWD\""}},{"result":{"nanos":512600,"millis":0.5126,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":6,"text":"def lpAccountNo = \"1000110002462537\""}},{"result":{"nanos":644300,"millis":0.6443,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - pay_test_tw001"],"background":true,"line":16,"prefix":"*","index":7,"text":"def channelId = \"1651833220\""}},{"result":{"nanos":557200,"millis":0.5572,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":8,"text":"def channelSecretKey = \"4825631fee1f0ceaacffd2a3f1578413\""}},{"result":{"nanos":614300,"millis":0.6143,"status":"passed"},"step":{"comments":["# MKTP DATA"],"background":true,"line":21,"prefix":"*","index":9,"text":"def mktURI = \"http:\/\/sparrow-api-pay.line-apps-beta.com:14404\/internal\""}},{"result":{"nanos":513800,"millis":0.5138,"status":"passed"},"step":{"background":true,"line":22,"prefix":"*","index":10,"text":"def merchantID = \"test-QAtailoff03\""}},{"result":{"nanos":426500,"millis":0.4265,"status":"passed"},"step":{"background":true,"line":23,"prefix":"*","index":11,"text":"def applySeq = 26440"}},{"result":{"nanos":1192100,"millis":1.1921,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - LINEPAY_MKT1"],"background":true,"line":26,"prefix":"*","index":12,"text":"def channelId = \"1651851137\""}},{"result":{"nanos":851900,"millis":0.8519,"status":"passed"},"step":{"background":true,"line":27,"prefix":"*","index":13,"text":"def channelSecretKey = \"92b9ed57d04cca448beca0652ef0bd34\""}},{"result":{"nanos":692000,"millis":0.692,"status":"passed"},"step":{"comments":["## -----MKTP----- ##","## Order - Calculation ##"],"line":32,"prefix":"*","index":0,"text":"def path = \"\/v1\/TW\/order\""}},{"result":{"nanos":21003900,"millis":21.0039,"status":"passed"},"step":{"endLine":38,"line":33,"prefix":"*","docString":"{\n\t\t X-LP-MK-MERCHANT-ID : #(merchantID)\n}","index":1,"text":"def req_header ="}},{"result":{"nanos":1489500,"millis":1.4895,"status":"passed"},"step":{"endLine":44,"line":39,"prefix":"*","docString":"{\n  \"applySeq\": #(applySeq)\n}","index":2,"text":"def req_body ="}},{"result":{"nanos":13032500,"millis":13.0325,"status":"passed"},"step":{"line":45,"prefix":"Given","index":3,"text":"url mktURI + path"}},{"result":{"nanos":19275200,"millis":19.2752,"status":"passed"},"step":{"line":46,"prefix":"And","index":4,"text":"headers req_header"}},{"result":{"nanos":441100,"millis":0.4411,"status":"passed"},"step":{"line":47,"prefix":"And","index":5,"text":"request req_body"}},{"result":{"nanos":812427700,"millis":812.4277,"status":"passed"},"step":{"line":48,"prefix":"When","index":6,"text":"method POST"}},{"result":{"nanos":533100,"millis":0.5331,"status":"passed"},"step":{"line":49,"prefix":"Then","index":7,"text":"status 200"}},{"result":{"nanos":9286300,"millis":9.2863,"status":"passed"},"step":{"line":50,"prefix":"And","index":8,"text":"match response.resultCode == \"0000\""}},{"result":{"nanos":15776600,"millis":15.7766,"status":"passed"},"step":{"line":52,"prefix":"*","index":9,"text":"def tempOrderSeq = response.data.tempOrderSeq"}},{"result":{"nanos":1779100,"millis":1.7791,"status":"passed"},"step":{"comments":["## Order - Payment Request ##"],"line":55,"prefix":"*","index":10,"text":"def path = \"\/v1\/TW\/order\/\" + tempOrderSeq + \"\/payment\/request\""}},{"result":{"nanos":918500,"millis":0.9185,"status":"passed"},"step":{"endLine":61,"line":56,"prefix":"*","docString":"{\n\t\t X-LP-MK-MERCHANT-ID : #(merchantID)\n}","index":11,"text":"def req_header ="}},{"result":{"nanos":213000,"millis":0.213,"status":"passed"},"step":{"endLine":67,"line":62,"prefix":"*","docString":"{\n  \"paymentType\": \"LINE_PAY\"\n}","index":12,"text":"def req_body ="}},{"result":{"nanos":58843800,"millis":58.8438,"status":"passed"},"step":{"line":68,"prefix":"*","index":13,"text":"def orderId = 'ORD_' + Java.type('Payment.Util.PaymentUtil').generateOrderId()"}},{"result":{"nanos":1036000,"millis":1.036,"status":"passed"},"step":{"line":70,"prefix":"Given","index":14,"text":"url mktURI + path"}},{"result":{"nanos":446400,"millis":0.4464,"status":"passed"},"step":{"line":71,"prefix":"And","index":15,"text":"headers req_header"}},{"result":{"nanos":179900,"millis":0.1799,"status":"passed"},"step":{"line":72,"prefix":"And","index":16,"text":"request req_body"}},{"result":{"nanos":650155300,"millis":650.1553,"status":"passed"},"step":{"line":73,"prefix":"When","index":17,"text":"method POST"}},{"result":{"nanos":17200,"millis":0.0172,"status":"passed"},"step":{"line":74,"prefix":"Then","index":18,"text":"status 200"}},{"result":{"nanos":1392200,"millis":1.3922,"status":"passed"},"step":{"line":75,"prefix":"And","index":19,"text":"match response.resultCode == \"0000\""}},{"result":{"nanos":900600,"millis":0.9006,"status":"passed"},"step":{"line":77,"prefix":"*","index":20,"text":"def transactionId = response.data.transactionId"}},{"result":{"nanos":6566400,"millis":6.5664,"status":"passed"},"step":{"line":78,"prefix":"And","index":21,"text":"Java.type('Payment.Util.PaymentUtil').setVar(\"transactionReserveId\", response.data.paymentUrl.web)"}},{"result":{"nanos":565300,"millis":0.5653,"status":"passed"},"step":{"comments":["## Request payment ##"],"line":81,"prefix":"*","index":22,"text":"def path = \"\/v3\/payment\/request\/get\""}},{"result":{"nanos":971200,"millis":0.9712,"status":"passed"},"step":{"line":82,"prefix":"*","index":23,"text":"def transactionReserveId = Java.type('Payment.Util.PaymentUtil').getVar(\"transactionReserveId\")"}},{"result":{"nanos":463700,"millis":0.4637,"status":"passed"},"step":{"endLine":89,"line":83,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":24,"text":"def req_header ="}},{"result":{"nanos":370500,"millis":0.3705,"status":"passed"},"step":{"endLine":95,"line":90,"prefix":"*","docString":"{\n  \"transactionReserveId\": #(transactionReserveId)\n}","index":25,"text":"def req_body ="}},{"result":{"nanos":308000,"millis":0.308,"status":"passed"},"step":{"line":98,"prefix":"Given","index":26,"text":"url baseURI + path"}},{"result":{"nanos":109200,"millis":0.1092,"status":"passed"},"step":{"line":99,"prefix":"And","index":27,"text":"headers req_header"}},{"result":{"nanos":59600,"millis":0.0596,"status":"passed"},"step":{"line":100,"prefix":"And","index":28,"text":"request req_body"}},{"result":{"nanos":417875100,"millis":417.8751,"status":"passed"},"step":{"line":101,"prefix":"When","index":29,"text":"method POST"}},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":102,"prefix":"Then","index":30,"text":"status 200"}},{"result":{"nanos":966500,"millis":0.9665,"status":"passed"},"step":{"line":103,"prefix":"And","index":31,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":3589600,"millis":3.5896,"status":"passed"},"step":{"line":104,"prefix":"And","index":32,"text":"match response.info.cancelUrl != null"}},{"result":{"nanos":1073900,"millis":1.0739,"status":"passed"},"step":{"comments":["## Payment ##","# token 발급"],"line":108,"prefix":"*","index":33,"text":"def path = \"\/v1\/line-users\/\" + mid + \"\/tokens\/issue\""}},{"result":{"nanos":221600,"millis":0.2216,"status":"passed"},"step":{"line":109,"prefix":"Given","index":34,"text":"url baseURI + path"}},{"result":{"nanos":114985800,"millis":114.9858,"status":"passed"},"step":{"line":110,"prefix":"When","index":35,"text":"method GET"}},{"result":{"nanos":14900,"millis":0.0149,"status":"passed"},"step":{"line":111,"prefix":"Then","index":36,"text":"status 200"}},{"result":{"nanos":403900,"millis":0.4039,"status":"passed"},"step":{"line":112,"prefix":"And","index":37,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":260400,"millis":0.2604,"status":"passed"},"step":{"line":113,"prefix":"And","index":38,"text":"match response.info.requestToken != null"}},{"result":{"nanos":680500,"millis":0.6805,"status":"passed"},"step":{"line":114,"prefix":"*","index":39,"text":"def requestToken = response.info.requestToken"}},{"result":{"nanos":702100,"millis":0.7021,"status":"passed"},"step":{"comments":["# RSA KEY 발급 및 password encrypt"],"line":117,"prefix":"*","index":40,"text":"def password = Java.type('Payment.Util.PaymentUtil').getPassword()"}},{"result":{"nanos":476600,"millis":0.4766,"status":"passed"},"step":{"endLine":123,"line":118,"prefix":"*","docString":"{\n  data: #(password)\n}","index":41,"text":"def payload ="}},{"result":{"nanos":282700,"millis":0.2827,"status":"passed"},"step":{"line":124,"prefix":"*","index":42,"text":"def path = \"\/v1\/rsa\/encrypt\""}},{"result":{"nanos":153800,"millis":0.1538,"status":"passed"},"step":{"line":125,"prefix":"Given","index":43,"text":"url baseURI + path"}},{"result":{"nanos":74900,"millis":0.0749,"status":"passed"},"step":{"line":126,"prefix":"And","index":44,"text":"request payload"}},{"result":{"nanos":125186700,"millis":125.1867,"status":"passed"},"step":{"line":127,"prefix":"When","index":45,"text":"method post"}},{"result":{"nanos":14700,"millis":0.0147,"status":"passed"},"step":{"line":128,"prefix":"Then","index":46,"text":"status 200"}},{"result":{"nanos":687600,"millis":0.6876,"status":"passed"},"step":{"line":129,"prefix":"And","index":47,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":283700,"millis":0.2837,"status":"passed"},"step":{"line":130,"prefix":"And","index":48,"text":"match response.info.encryptedText != null"}},{"result":{"nanos":223000,"millis":0.223,"status":"passed"},"step":{"line":131,"prefix":"And","index":49,"text":"match response.info.keyName != null"}},{"result":{"nanos":674600,"millis":0.6746,"status":"passed"},"step":{"line":132,"prefix":"*","index":50,"text":"def password =  response.info.encryptedText"}},{"result":{"nanos":519000,"millis":0.519,"status":"passed"},"step":{"line":133,"prefix":"*","index":51,"text":"def keyName = response.info.keyName"}},{"result":{"nanos":335700,"millis":0.3357,"status":"passed"},"step":{"comments":["# 본 API 호출"],"line":136,"prefix":"*","index":52,"text":"def path = \"\/v3\/payment\/request\/authorize\""}},{"result":{"nanos":201800,"millis":0.2018,"status":"passed"},"step":{"endLine":144,"line":137,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t11.10.2\tAndroid OS\t10\",\n  x-lp-region : \"TW\"\n}","index":53,"text":"def req_header ="}},{"result":{"nanos":949700,"millis":0.9497,"status":"passed"},"step":{"endLine":163,"line":145,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId),\n  \"keyName\" : #(keyName),\n  \"password\" : #(password),\n  \"requestToken\" : #(requestToken),\n  \"payments\":[{\n      \"amount\":\"539\",\n      \"currency\":\"TWD\",\n      \"method\":\"CREDIT_CARD\",\n      \"lpAccountNo\": #(lpAccountNo)\n   }],\n  \"additionalAgreements\": [{\n    \"type\":\"LINE_PAY_OA\",\n    \"checkYn\" : \"Y\"\n  }]\n}","index":54,"text":"def req_body ="}},{"result":{"nanos":157400,"millis":0.1574,"status":"passed"},"step":{"line":164,"prefix":"Given","index":55,"text":"url baseURI + path"}},{"result":{"nanos":191600,"millis":0.1916,"status":"passed"},"step":{"line":165,"prefix":"And","index":56,"text":"headers req_header"}},{"result":{"nanos":57100,"millis":0.0571,"status":"passed"},"step":{"line":166,"prefix":"And","index":57,"text":"request req_body"}},{"result":{"nanos":220453700,"millis":220.4537,"status":"passed"},"step":{"line":167,"prefix":"When","index":58,"text":"method post"}},{"result":{"nanos":17100,"millis":0.0171,"status":"passed"},"step":{"line":168,"prefix":"Then","index":59,"text":"status 200"}},{"result":{"nanos":440500,"millis":0.4405,"status":"passed"},"step":{"line":169,"prefix":"And","index":60,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":468700,"millis":0.4687,"status":"passed"},"step":{"comments":["## Calculate Amount ##"],"line":172,"prefix":"*","index":61,"text":"def path = \"\/v3\/payment\/request\/calculate\""}},{"result":{"nanos":211300,"millis":0.2113,"status":"passed"},"step":{"endLine":179,"line":173,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":62,"text":"def req_header ="}},{"result":{"nanos":162700,"millis":0.1627,"status":"passed"},"step":{"endLine":185,"line":180,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":63,"text":"def req_body ="}},{"result":{"nanos":91100,"millis":0.0911,"status":"passed"},"step":{"line":186,"prefix":"Given","index":64,"text":"url baseURI + path"}},{"result":{"nanos":57100,"millis":0.0571,"status":"passed"},"step":{"line":187,"prefix":"And","index":65,"text":"headers req_header"}},{"result":{"nanos":32900,"millis":0.0329,"status":"passed"},"step":{"line":188,"prefix":"And","index":66,"text":"request req_body"}},{"result":{"nanos":161027900,"millis":161.0279,"status":"passed"},"step":{"line":189,"prefix":"When","index":67,"text":"method post"}},{"result":{"nanos":17700,"millis":0.0177,"status":"passed"},"step":{"line":190,"prefix":"Then","index":68,"text":"status 200"}},{"result":{"nanos":386700,"millis":0.3867,"status":"passed"},"step":{"line":191,"prefix":"And","index":69,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":260800,"millis":0.2608,"status":"passed"},"step":{"line":192,"prefix":"And","index":70,"text":"match response.info.productAmount.amount == amount"}},{"result":{"nanos":5003859000,"millis":5003.859,"status":"passed"},"step":{"line":193,"prefix":"Then","index":71,"text":"Java.type('Payment.Util.PaymentUtil').pause(5000)"}},{"result":{"nanos":894200,"millis":0.8942,"status":"passed"},"step":{"comments":["## Get authorization ##"],"line":196,"prefix":"*","index":72,"text":"def path = \"\/v3\/payment\/authorization\/get\""}},{"result":{"nanos":436300,"millis":0.4363,"status":"passed"},"step":{"endLine":203,"line":197,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":73,"text":"def req_header ="}},{"result":{"nanos":285200,"millis":0.2852,"status":"passed"},"step":{"endLine":209,"line":204,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":74,"text":"def req_body ="}},{"result":{"nanos":247400,"millis":0.2474,"status":"passed"},"step":{"line":210,"prefix":"Given","index":75,"text":"url baseURI + path"}},{"result":{"nanos":119500,"millis":0.1195,"status":"passed"},"step":{"line":211,"prefix":"And","index":76,"text":"headers req_header"}},{"result":{"nanos":71800,"millis":0.0718,"status":"passed"},"step":{"line":212,"prefix":"And","index":77,"text":"request req_body"}},{"result":{"nanos":440149500,"millis":440.1495,"status":"passed"},"step":{"line":213,"prefix":"When","index":78,"text":"method post"}},{"result":{"nanos":14200,"millis":0.0142,"status":"passed"},"step":{"line":214,"prefix":"Then","index":79,"text":"status 200"}},{"result":{"nanos":482500,"millis":0.4825,"status":"passed"},"step":{"line":215,"prefix":"And","index":80,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":628600,"millis":0.6286,"status":"passed"},"step":{"comments":["## Confirm authorization ##"],"line":218,"prefix":"*","index":81,"text":"def path = \"\/v3\/payment\/authorization\/confirm\""}},{"result":{"nanos":273700,"millis":0.2737,"status":"passed"},"step":{"endLine":225,"line":219,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":82,"text":"def req_header ="}},{"result":{"nanos":219100,"millis":0.2191,"status":"passed"},"step":{"endLine":231,"line":226,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":83,"text":"def req_body ="}},{"result":{"nanos":163600,"millis":0.1636,"status":"passed"},"step":{"line":232,"prefix":"Given","index":84,"text":"url baseURI + path"}},{"result":{"nanos":83700,"millis":0.0837,"status":"passed"},"step":{"line":233,"prefix":"And","index":85,"text":"headers req_header"}},{"result":{"nanos":50900,"millis":0.0509,"status":"passed"},"step":{"line":234,"prefix":"And","index":86,"text":"request req_body"}},{"result":{"nanos":254619200,"millis":254.6192,"status":"passed"},"step":{"line":235,"prefix":"When","index":87,"text":"method post"}},{"result":{"nanos":30700,"millis":0.0307,"status":"passed"},"step":{"line":236,"prefix":"Then","index":88,"text":"status 200"}},{"result":{"nanos":832800,"millis":0.8328,"status":"passed"},"step":{"line":237,"prefix":"And","index":89,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":1547100,"millis":1.5471,"status":"passed"},"step":{"comments":["## MKTP Confirm Payment ##"],"line":241,"prefix":"*","index":90,"text":"def path = \"\/v1\/TW\/order\/\" + tempOrderSeq + \"\/payment\/confirm\""}},{"result":{"nanos":1040800,"millis":1.0408,"status":"passed"},"step":{"endLine":247,"line":242,"prefix":"*","docString":"{\n  X-LP-MK-MERCHANT-ID : #(merchantID)\n}","index":91,"text":"def req_header ="}},{"result":{"nanos":293000,"millis":0.293,"status":"passed"},"step":{"endLine":254,"line":248,"prefix":"*","docString":"{\n \"amount\": 539,\n \"currency\": \"TWD\"\n}","index":92,"text":"text req_body ="}},{"result":{"nanos":1245800,"millis":1.2458,"status":"passed"},"step":{"line":255,"prefix":"*","index":93,"text":"def nonce = Java.type('Payment.Util.PaymentUtil').getNonce()"}},{"result":{"nanos":7330500,"millis":7.3305,"status":"passed"},"step":{"line":256,"prefix":"*","index":94,"text":"def signature = Java.type('Payment.Util.PaymentUtil').getSignature(channelSecretKey, path, req_body, nonce)"}},{"result":{"nanos":275800,"millis":0.2758,"status":"passed"},"step":{"line":257,"prefix":"Given","index":95,"text":"url mktURI + path"}},{"result":{"nanos":107200,"millis":0.1072,"status":"passed"},"step":{"line":258,"prefix":"And","index":96,"text":"headers req_header"}},{"result":{"nanos":106200,"millis":0.1062,"status":"passed"},"step":{"line":259,"prefix":"And","index":97,"text":"request req_body"}},{"result":{"nanos":2117534400,"millis":2117.5344,"status":"passed"},"step":{"line":260,"prefix":"When","index":98,"text":"method post"}},{"result":{"nanos":22800,"millis":0.0228,"status":"passed"},"step":{"line":261,"prefix":"Then","index":99,"text":"status 200"}},{"result":{"nanos":854500,"millis":0.8545,"status":"passed"},"step":{"line":262,"prefix":"And","index":100,"text":"match response.resultCode == \"0000\""}}],"executorName":"main","line":28,"name":"Credit card 전액결제 \/ 자동 매입 > 전체환불","description":"","durationMillis":10613.2703,"startTime":1673332703048,"failed":false,"refId":"[1:28]","endTime":1673332713681,"exampleIndex":-1}],"callDepth":0,"name":"MKTP Payment","description":"","resultDate":"2023-01-10 03:38:33 오후","durationMillis":10613.2703,"passedCount":1}