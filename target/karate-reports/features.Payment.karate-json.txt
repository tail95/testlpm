{"failedCount":1,"prefixedPath":"classpath:features\/Payment.feature","packageQualifiedName":"features.Payment","loopIndex":-1,"relativePath":"features\/Payment.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":32213900,"millis":32.2139,"status":"passed"},"step":{"background":true,"line":3,"prefix":"*","index":0,"text":"configure headers = { \"X-LP-AUTOTEST-NAME\": \"features\/Payment.feature\" }"}},{"result":{"nanos":49239100,"millis":49.2391,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseURI = \"http:\/\/api-pay.line-apps-beta.com:8080\""}},{"result":{"nanos":748800,"millis":0.7488,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def paymentsBaseURI = \"https:\/\/api-pay.line-beta.me:443\""}},{"result":{"nanos":606700,"millis":0.6067,"status":"passed"},"step":{"comments":["# 계정 정보"],"background":true,"line":10,"prefix":"*","index":3,"text":"def mid = \"u00d5f3a707a98b67e13f342c8530601a\""}},{"result":{"nanos":1538200,"millis":1.5382,"status":"passed"},"step":{"comments":["# 결제 정보"],"background":true,"line":12,"prefix":"*","index":4,"text":"def amount = 539"}},{"result":{"nanos":611200,"millis":0.6112,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":5,"text":"def currency = \"TWD\""}},{"result":{"nanos":419400,"millis":0.4194,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":6,"text":"def lpAccountNo = \"1000110002462537\""}},{"result":{"nanos":404400,"millis":0.4044,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - pay_test_tw001"],"background":true,"line":16,"prefix":"*","index":7,"text":"def channelId = \"1651833220\""}},{"result":{"nanos":373800,"millis":0.3738,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":8,"text":"def channelSecretKey = \"4825631fee1f0ceaacffd2a3f1578413\""}},{"result":{"nanos":513400,"millis":0.5134,"status":"passed"},"step":{"comments":["# MKTP DATA"],"background":true,"line":21,"prefix":"*","index":9,"text":"def mktURI = \"http:\/\/sparrow-api-pay.line-apps-beta.com:14404\/internal\""}},{"result":{"nanos":497200,"millis":0.4972,"status":"passed"},"step":{"background":true,"line":22,"prefix":"*","index":10,"text":"def merchantID = \"test-QAtailoff03\""}},{"result":{"nanos":612100,"millis":0.6121,"status":"passed"},"step":{"background":true,"line":23,"prefix":"*","index":11,"text":"def applySeq = 26440"}},{"result":{"nanos":3515700,"millis":3.5157,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - LINEPAY_MKT1"],"background":true,"line":26,"prefix":"*","index":12,"text":"def channelId = \"1651851137\""}},{"result":{"nanos":715400,"millis":0.7154,"status":"passed"},"step":{"background":true,"line":27,"prefix":"*","index":13,"text":"def channelSecretKey = \"92b9ed57d04cca448beca0652ef0bd34\""}},{"result":{"nanos":526600,"millis":0.5266,"status":"passed"},"step":{"comments":["#\t## -----MKTP----- ##","#\t## Order - Calculation ##","#\t* def path = \"\/v1\/TW\/order\"","#\t* def req_header =","#\"\"\"","#{","#\t\t X-LP-MK-MERCHANT-ID : #(merchantID)","#}","#\"\"\"","#* def req_body =","#\t    \"\"\"","#\t    {","#\t      \"applySeq\": #(applySeq)","#\t    }","#\t    \"\"\"","#\t  Given url mktURI + path","#\t\tAnd headers req_header","#\t\tAnd request req_body","#\t\tWhen method POST","#Then status 200","#And match response.resultCode == \"0000\"","#","#\t* def tempOrderSeq = response.data.tempOrderSeq","#","## Order - Payment Request ##"],"line":55,"prefix":"*","index":0,"text":"def tempOrderSeq = \"37240\""}},{"result":{"nanos":16288400,"millis":16.2884,"status":"passed"},"step":{"line":56,"prefix":"*","index":1,"text":"def path = \"\/v1\/TW\/order\/\" + tempOrderSeq + \"\/payment\/request\""}},{"result":{"nanos":1482400,"millis":1.4824,"status":"passed"},"step":{"endLine":62,"line":57,"prefix":"*","docString":"{\n\t\t X-LP-MK-MERCHANT-ID : #(merchantID)\n}","index":2,"text":"def req_header ="}},{"result":{"nanos":171000,"millis":0.171,"status":"passed"},"step":{"endLine":68,"line":63,"prefix":"*","docString":"{\n  \"paymentType\": \"LINE_PAY\"\n}","index":3,"text":"def req_body ="}},{"result":{"nanos":33436800,"millis":33.4368,"status":"passed"},"step":{"line":69,"prefix":"*","index":4,"text":"def orderId = 'ORD_' + Java.type('Utils.PaymentUtil').generateOrderId()"}},{"result":{"nanos":1221000,"millis":1.221,"status":"passed"},"step":{"line":71,"prefix":"Given","index":5,"text":"url mktURI + path"}},{"result":{"nanos":10352600,"millis":10.3526,"status":"passed"},"step":{"line":72,"prefix":"And","index":6,"text":"headers req_header"}},{"result":{"nanos":348500,"millis":0.3485,"status":"passed"},"step":{"line":73,"prefix":"And","index":7,"text":"request req_body"}},{"result":{"nanos":809421100,"millis":809.4211,"status":"passed"},"step":{"line":74,"prefix":"When","index":8,"text":"method POST"}},{"result":{"nanos":1585200,"millis":1.5852,"status":"passed"},"step":{"line":75,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":10131600,"millis":10.1316,"status":"passed"},"step":{"line":76,"prefix":"And","index":10,"text":"match response.resultCode == \"0000\""}},{"result":{"nanos":903100,"millis":0.9031,"status":"passed"},"step":{"line":78,"prefix":"*","index":11,"text":"def transactionId = response.data.transactionId"}},{"result":{"nanos":6842900,"millis":6.8429,"status":"passed"},"step":{"line":79,"prefix":"And","index":12,"text":"Java.type('Utils.PaymentUtil').setVar(\"transactionReserveId\", response.data.paymentUrl.web)"}},{"result":{"nanos":576000,"millis":0.576,"status":"passed"},"step":{"comments":["## Request payment ##"],"line":82,"prefix":"*","index":13,"text":"def path = \"\/v3\/payment\/request\/get\""}},{"result":{"nanos":2502400,"millis":2.5024,"status":"passed"},"step":{"line":83,"prefix":"*","index":14,"text":"def transactionReserveId = Java.type('Utils.MktpUtil').getTransactionReserveId()"}},{"result":{"nanos":564200,"millis":0.5642,"status":"passed"},"step":{"line":84,"prefix":"*","index":15,"text":"def transactionReserveId = \"RTNvdlBKalFlK0hvT0VFMjhPT2FxY2tydUpRUmpza2dZNzgxRWFZaFNnMk9pU3MrQ2RsMjdiZXMwRis3VHE5TQ\""}},{"result":{"nanos":465500,"millis":0.4655,"status":"passed"},"step":{"endLine":91,"line":85,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":16,"text":"def req_header ="}},{"result":{"nanos":432300,"millis":0.4323,"status":"passed"},"step":{"endLine":97,"line":92,"prefix":"*","docString":"{\n  \"transactionReserveId\": #(transactionReserveId)\n}","index":17,"text":"def req_body ="}},{"result":{"nanos":347800,"millis":0.3478,"status":"passed"},"step":{"line":100,"prefix":"Given","index":18,"text":"url baseURI + path"}},{"result":{"nanos":195500,"millis":0.1955,"status":"passed"},"step":{"line":101,"prefix":"And","index":19,"text":"headers req_header"}},{"result":{"nanos":74600,"millis":0.0746,"status":"passed"},"step":{"line":102,"prefix":"And","index":20,"text":"request req_body"}},{"result":{"nanos":429803100,"millis":429.8031,"status":"passed"},"step":{"line":103,"prefix":"When","index":21,"text":"method POST"}},{"result":{"nanos":16000,"millis":0.016,"status":"passed"},"step":{"line":104,"prefix":"Then","index":22,"text":"status 200"}},{"result":{"nanos":569700,"millis":0.5697,"status":"passed"},"step":{"line":105,"prefix":"And","index":23,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":1194200,"millis":1.1942,"status":"passed"},"step":{"comments":["#And match response.info.cancelUrl != null","## Payment ##","# token 발급"],"line":110,"prefix":"*","index":24,"text":"def path = \"\/v1\/line-users\/\" + mid + \"\/tokens\/issue\""}},{"result":{"nanos":644600,"millis":0.6446,"status":"passed"},"step":{"line":111,"prefix":"Given","index":25,"text":"url baseURI + path"}},{"result":{"nanos":110735800,"millis":110.7358,"status":"passed"},"step":{"line":112,"prefix":"When","index":26,"text":"method GET"}},{"result":{"nanos":22000,"millis":0.022,"status":"passed"},"step":{"line":113,"prefix":"Then","index":27,"text":"status 200"}},{"result":{"nanos":719200,"millis":0.7192,"status":"passed"},"step":{"line":114,"prefix":"And","index":28,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":5179500,"millis":5.1795,"status":"passed"},"step":{"line":115,"prefix":"And","index":29,"text":"match response.info.requestToken != null"}},{"result":{"nanos":787900,"millis":0.7879,"status":"passed"},"step":{"line":116,"prefix":"*","index":30,"text":"def requestToken = response.info.requestToken"}},{"result":{"nanos":700500,"millis":0.7005,"status":"passed"},"step":{"comments":["# RSA KEY 발급 및 password encrypt"],"line":119,"prefix":"*","index":31,"text":"def password = Java.type('Utils.PaymentUtil').getPassword()"}},{"result":{"nanos":610500,"millis":0.6105,"status":"passed"},"step":{"endLine":125,"line":120,"prefix":"*","docString":"{\n  data: #(password)\n}","index":32,"text":"def payload ="}},{"result":{"nanos":278500,"millis":0.2785,"status":"passed"},"step":{"line":126,"prefix":"*","index":33,"text":"def path = \"\/v1\/rsa\/encrypt\""}},{"result":{"nanos":157900,"millis":0.1579,"status":"passed"},"step":{"line":127,"prefix":"Given","index":34,"text":"url baseURI + path"}},{"result":{"nanos":120700,"millis":0.1207,"status":"passed"},"step":{"line":128,"prefix":"And","index":35,"text":"request payload"}},{"result":{"nanos":116859000,"millis":116.859,"status":"passed"},"step":{"line":129,"prefix":"When","index":36,"text":"method post"}},{"result":{"nanos":20100,"millis":0.0201,"status":"passed"},"step":{"line":130,"prefix":"Then","index":37,"text":"status 200"}},{"result":{"nanos":651800,"millis":0.6518,"status":"passed"},"step":{"line":131,"prefix":"And","index":38,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":467600,"millis":0.4676,"status":"passed"},"step":{"line":132,"prefix":"And","index":39,"text":"match response.info.encryptedText != null"}},{"result":{"nanos":320800,"millis":0.3208,"status":"passed"},"step":{"line":133,"prefix":"And","index":40,"text":"match response.info.keyName != null"}},{"result":{"nanos":761600,"millis":0.7616,"status":"passed"},"step":{"line":134,"prefix":"*","index":41,"text":"def password =  response.info.encryptedText"}},{"result":{"nanos":570200,"millis":0.5702,"status":"passed"},"step":{"line":135,"prefix":"*","index":42,"text":"def keyName = response.info.keyName"}},{"result":{"nanos":342800,"millis":0.3428,"status":"passed"},"step":{"comments":["# 본 API 호출"],"line":138,"prefix":"*","index":43,"text":"def path = \"\/v3\/payment\/request\/authorize\""}},{"result":{"nanos":213500,"millis":0.2135,"status":"passed"},"step":{"endLine":146,"line":139,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t11.10.2\tAndroid OS\t10\",\n  x-lp-region : \"TW\"\n}","index":44,"text":"def req_header ="}},{"result":{"nanos":1080500,"millis":1.0805,"status":"passed"},"step":{"endLine":165,"line":147,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId),\n  \"keyName\" : #(keyName),\n  \"password\" : #(password),\n  \"requestToken\" : #(requestToken),\n  \"payments\":[{\n      \"amount\":\"539\",\n      \"currency\":\"TWD\",\n      \"method\":\"CREDIT_CARD\",\n      \"lpAccountNo\": #(lpAccountNo)\n   }],\n  \"additionalAgreements\": [{\n    \"type\":\"LINE_PAY_OA\",\n    \"checkYn\" : \"Y\"\n  }]\n}","index":45,"text":"def req_body ="}},{"result":{"nanos":116100,"millis":0.1161,"status":"passed"},"step":{"line":166,"prefix":"Given","index":46,"text":"url baseURI + path"}},{"result":{"nanos":62900,"millis":0.0629,"status":"passed"},"step":{"line":167,"prefix":"And","index":47,"text":"headers req_header"}},{"result":{"nanos":37600,"millis":0.0376,"status":"passed"},"step":{"line":168,"prefix":"And","index":48,"text":"request req_body"}},{"result":{"nanos":189914800,"millis":189.9148,"status":"passed"},"step":{"line":169,"prefix":"When","index":49,"text":"method post"}},{"result":{"nanos":25900,"millis":0.0259,"status":"passed"},"step":{"line":170,"prefix":"Then","index":50,"text":"status 200"}},{"result":{"nanos":952400,"millis":0.9524,"status":"passed"},"step":{"line":171,"prefix":"And","index":51,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":909500,"millis":0.9095,"status":"passed"},"step":{"comments":["## Calculate Amount ##"],"line":174,"prefix":"*","index":52,"text":"def path = \"\/v3\/payment\/request\/calculate\""}},{"result":{"nanos":412700,"millis":0.4127,"status":"passed"},"step":{"endLine":181,"line":175,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":53,"text":"def req_header ="}},{"result":{"nanos":232400,"millis":0.2324,"status":"passed"},"step":{"endLine":187,"line":182,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":54,"text":"def req_body ="}},{"result":{"nanos":132800,"millis":0.1328,"status":"passed"},"step":{"line":188,"prefix":"Given","index":55,"text":"url baseURI + path"}},{"result":{"nanos":89100,"millis":0.0891,"status":"passed"},"step":{"line":189,"prefix":"And","index":56,"text":"headers req_header"}},{"result":{"nanos":62200,"millis":0.0622,"status":"passed"},"step":{"line":190,"prefix":"And","index":57,"text":"request req_body"}},{"result":{"nanos":108580000,"millis":108.58,"status":"passed"},"step":{"line":191,"prefix":"When","index":58,"text":"method post"}},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":192,"prefix":"Then","index":59,"text":"status 200"}},{"result":{"nanos":437000,"millis":0.437,"status":"passed"},"step":{"line":193,"prefix":"And","index":60,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":240800,"millis":0.2408,"status":"passed"},"step":{"line":194,"prefix":"And","index":61,"text":"match response.info.productAmount.amount == amount"}},{"result":{"nanos":5006735400,"millis":5006.7354,"status":"passed"},"step":{"line":195,"prefix":"Then","index":62,"text":"Java.type('Utils.PaymentUtil').pause(5000)"}},{"result":{"nanos":1163400,"millis":1.1634,"status":"passed"},"step":{"comments":["## Get authorization ##"],"line":198,"prefix":"*","index":63,"text":"def path = \"\/v3\/payment\/authorization\/get\""}},{"result":{"nanos":525600,"millis":0.5256,"status":"passed"},"step":{"endLine":205,"line":199,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":64,"text":"def req_header ="}},{"result":{"nanos":318800,"millis":0.3188,"status":"passed"},"step":{"endLine":211,"line":206,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":65,"text":"def req_body ="}},{"result":{"nanos":180200,"millis":0.1802,"status":"passed"},"step":{"line":212,"prefix":"Given","index":66,"text":"url baseURI + path"}},{"result":{"nanos":119500,"millis":0.1195,"status":"passed"},"step":{"line":213,"prefix":"And","index":67,"text":"headers req_header"}},{"result":{"nanos":84800,"millis":0.0848,"status":"passed"},"step":{"line":214,"prefix":"And","index":68,"text":"request req_body"}},{"result":{"nanos":534021400,"millis":534.0214,"status":"passed"},"step":{"line":215,"prefix":"When","index":69,"text":"method post"}},{"result":{"nanos":23600,"millis":0.0236,"status":"passed"},"step":{"line":216,"prefix":"Then","index":70,"text":"status 200"}},{"result":{"nanos":626500,"millis":0.6265,"status":"passed"},"step":{"line":217,"prefix":"And","index":71,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":739300,"millis":0.7393,"status":"passed"},"step":{"comments":["## Confirm authorization ##"],"line":220,"prefix":"*","index":72,"text":"def path = \"\/v3\/payment\/authorization\/confirm\""}},{"result":{"nanos":381100,"millis":0.3811,"status":"passed"},"step":{"endLine":227,"line":221,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":73,"text":"def req_header ="}},{"result":{"nanos":285400,"millis":0.2854,"status":"passed"},"step":{"endLine":233,"line":228,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":74,"text":"def req_body ="}},{"result":{"nanos":162700,"millis":0.1627,"status":"passed"},"step":{"line":234,"prefix":"Given","index":75,"text":"url baseURI + path"}},{"result":{"nanos":105200,"millis":0.1052,"status":"passed"},"step":{"line":235,"prefix":"And","index":76,"text":"headers req_header"}},{"result":{"nanos":63400,"millis":0.0634,"status":"passed"},"step":{"line":236,"prefix":"And","index":77,"text":"request req_body"}},{"result":{"nanos":261065800,"millis":261.0658,"status":"passed"},"step":{"line":237,"prefix":"When","index":78,"text":"method post"}},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":238,"prefix":"Then","index":79,"text":"status 200"}},{"result":{"nanos":384400,"millis":0.3844,"status":"passed"},"step":{"line":239,"prefix":"And","index":80,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":3597700,"millis":3.5977,"status":"passed"},"step":{"comments":["# Confirm payment ##"],"line":244,"prefix":"*","index":81,"text":"def path = \"\/v3\/payments\/\" + transactionId + \"\/confirm\""}},{"result":{"nanos":817500,"millis":0.8175,"status":"passed"},"step":{"line":245,"prefix":"*","index":82,"text":"def nonce = Java.type('Utils.PaymentUtil').getNonce()"}},{"result":{"nanos":105900,"millis":0.1059,"status":"passed"},"step":{"endLine":252,"line":246,"prefix":"*","docString":"{\n \"amount\": 539,\n \"currency\": \"TWD\"\n}","index":83,"text":"text req_body ="}},{"result":{"nanos":6025700,"millis":6.0257,"status":"passed"},"step":{"line":253,"prefix":"*","index":84,"text":"def signature = Java.type('Utils.PaymentUtil').getSignature(channelSecretKey, path, req_body, nonce)"}},{"result":{"nanos":1074800,"millis":1.0748,"status":"passed"},"step":{"endLine":262,"line":254,"prefix":"*","docString":"{\n  Content-Type : 'application\/json',\n  X-LINE-ChannelId : #(channelId),\n  X-LINE-Authorization-Nonce : #(nonce),\n  X-LINE-Authorization : #(signature)\n}","index":85,"text":"def req_header ="}},{"result":{"nanos":431300,"millis":0.4313,"status":"passed"},"step":{"line":263,"prefix":"Given","index":86,"text":"url paymentsBaseURI + path"}},{"result":{"nanos":108300,"millis":0.1083,"status":"passed"},"step":{"line":264,"prefix":"And","index":87,"text":"headers req_header"}},{"result":{"nanos":72300,"millis":0.0723,"status":"passed"},"step":{"line":265,"prefix":"And","index":88,"text":"request req_body"}},{"result":{"nanos":434798700,"millis":434.7987,"status":"passed"},"step":{"line":266,"prefix":"When","index":89,"text":"method post"}},{"result":{"nanos":21200,"millis":0.0212,"status":"passed"},"step":{"line":267,"prefix":"Then","index":90,"text":"status 200"}},{"result":{"nanos":682500,"errorMessage":"match failed: EQUALS\n  $ | not equal (STRING:STRING)\n  '1169'\n  '0000'\n\nclasspath:features\/Payment.feature:268","millis":0.6825,"status":"failed"},"step":{"line":268,"prefix":"And","index":91,"text":"match response.returnCode == \"0000\""}}],"line":28,"description":"","durationMillis":8219.6647,"failed":true,"error":"match failed: EQUALS\n  $ | not equal (STRING:STRING)\n  '1169'\n  '0000'\n\nclasspath:features\/Payment.feature:268","executorName":"main","name":"Credit card 전액결제 \/ 자동 매입 > 전체환불","startTime":1673345404109,"refId":"[1:28]","endTime":1673345412346,"exampleIndex":-1}],"callDepth":0,"name":"MKTP Payment","description":"","resultDate":"2023-01-10 07:10:12 오후","durationMillis":8219.6647,"passedCount":0}