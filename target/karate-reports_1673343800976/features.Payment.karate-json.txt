{"failedCount":0,"prefixedPath":"classpath:features\/Payment.feature","packageQualifiedName":"features.Payment","loopIndex":-1,"relativePath":"features\/Payment.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":33867600,"millis":33.8676,"status":"passed"},"step":{"background":true,"line":3,"prefix":"*","index":0,"text":"configure headers = { \"X-LP-AUTOTEST-NAME\": \"features\/Payment.feature\" }"}},{"result":{"nanos":53262200,"millis":53.2622,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def baseURI = \"http:\/\/api-pay.line-apps-beta.com:8080\""}},{"result":{"nanos":813900,"millis":0.8139,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":2,"text":"def paymentsBaseURI = \"https:\/\/api-pay.line-beta.me:443\""}},{"result":{"nanos":462800,"millis":0.4628,"status":"passed"},"step":{"comments":["# 계정 정보"],"background":true,"line":10,"prefix":"*","index":3,"text":"def mid = \"u00d5f3a707a98b67e13f342c8530601a\""}},{"result":{"nanos":3584400,"millis":3.5844,"status":"passed"},"step":{"comments":["# 결제 정보"],"background":true,"line":12,"prefix":"*","index":4,"text":"def amount = 539"}},{"result":{"nanos":606500,"millis":0.6065,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":5,"text":"def currency = \"TWD\""}},{"result":{"nanos":400200,"millis":0.4002,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":6,"text":"def lpAccountNo = \"1000110002462537\""}},{"result":{"nanos":365800,"millis":0.3658,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - pay_test_tw001"],"background":true,"line":16,"prefix":"*","index":7,"text":"def channelId = \"1651833220\""}},{"result":{"nanos":345700,"millis":0.3457,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":8,"text":"def channelSecretKey = \"4825631fee1f0ceaacffd2a3f1578413\""}},{"result":{"nanos":321400,"millis":0.3214,"status":"passed"},"step":{"comments":["# MKTP DATA"],"background":true,"line":21,"prefix":"*","index":9,"text":"def mktURI = \"http:\/\/sparrow-api-pay.line-apps-beta.com:14404\/internal\""}},{"result":{"nanos":346600,"millis":0.3466,"status":"passed"},"step":{"background":true,"line":22,"prefix":"*","index":10,"text":"def merchantID = \"test-QAtailoff03\""}},{"result":{"nanos":384500,"millis":0.3845,"status":"passed"},"step":{"background":true,"line":23,"prefix":"*","index":11,"text":"def applySeq = 26440"}},{"result":{"nanos":3658900,"millis":3.6589,"status":"passed"},"step":{"comments":["# set channelId & channelSecretKey - LINEPAY_MKT1"],"background":true,"line":26,"prefix":"*","index":12,"text":"def channelId = \"1651851137\""}},{"result":{"nanos":1471000,"millis":1.471,"status":"passed"},"step":{"background":true,"line":27,"prefix":"*","index":13,"text":"def channelSecretKey = \"92b9ed57d04cca448beca0652ef0bd34\""}},{"result":{"nanos":591500,"millis":0.5915,"status":"passed"},"step":{"comments":["#\t## -----MKTP----- ##","#\t## Order - Calculation ##","#\t* def path = \"\/v1\/TW\/order\"","#\t* def req_header =","#\"\"\"","#{","#\t\t X-LP-MK-MERCHANT-ID : #(merchantID)","#}","#\"\"\"","#* def req_body =","#\t    \"\"\"","#\t    {","#\t      \"applySeq\": #(applySeq)","#\t    }","#\t    \"\"\"","#\t  Given url mktURI + path","#\t\tAnd headers req_header","#\t\tAnd request req_body","#\t\tWhen method POST","#Then status 200","#And match response.resultCode == \"0000\"","#","#\t* def tempOrderSeq = response.data.tempOrderSeq","#","#\t## Order - Payment Request ##","#\t\t* def path = \"\/v1\/TW\/order\/\" + tempOrderSeq + \"\/payment\/request\"","#\t* def req_header =","#\"\"\"","#{","#\t\t X-LP-MK-MERCHANT-ID : #(merchantID)","#}","#\"\"\"","#* def req_body =","#\t    \"\"\"","#\t    {","#\t      \"paymentType\": \"LINE_PAY\"","#\t    }","#\t    \"\"\"","#* def orderId = 'ORD_' + Java.type('Utils.PaymentUtil').generateOrderId()","#","#\t  Given url mktURI + path","#\t\tAnd headers req_header","#\t\tAnd request req_body","#\t\tWhen method POST","#Then status 200","#And match response.resultCode == \"0000\"","#","#\t* def transactionId = response.data.transactionId","#And Java.type('Utils.PaymentUtil').setVar(\"transactionReserveId\", response.data.paymentUrl.web)","## Request payment ##"],"line":81,"prefix":"*","index":0,"text":"def path = \"\/v3\/payment\/request\/get\""}},{"result":{"nanos":46857700,"millis":46.8577,"status":"passed"},"step":{"line":82,"prefix":"*","index":1,"text":"def transactionReserveId = Java.type('Utils.MktpUtil').getTransactionReserveId()"}},{"result":{"nanos":823900,"millis":0.8239,"status":"passed"},"step":{"line":83,"prefix":"*","index":2,"text":"def transactionReserveId = \"OGRZaFBJaTNEdUg0d053dlVKWDRISGIydENRc212UFNoMDdYQ1dOWk1uS2VyekJDakU5aHRNUFh2bGRrQ0UxMw\""}},{"result":{"nanos":2577600,"millis":2.5776,"status":"passed"},"step":{"endLine":90,"line":84,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":3,"text":"def req_header ="}},{"result":{"nanos":733300,"millis":0.7333,"status":"passed"},"step":{"endLine":96,"line":91,"prefix":"*","docString":"{\n  \"transactionReserveId\": #(transactionReserveId)\n}","index":4,"text":"def req_body ="}},{"result":{"nanos":8181100,"millis":8.1811,"status":"passed"},"step":{"line":99,"prefix":"Given","index":5,"text":"url baseURI + path"}},{"result":{"nanos":12440000,"millis":12.44,"status":"passed"},"step":{"line":100,"prefix":"And","index":6,"text":"headers req_header"}},{"result":{"nanos":326800,"millis":0.3268,"status":"passed"},"step":{"line":101,"prefix":"And","index":7,"text":"request req_body"}},{"result":{"nanos":704167500,"millis":704.1675,"status":"passed"},"step":{"line":102,"prefix":"When","index":8,"text":"method POST"}},{"result":{"nanos":1152800,"millis":1.1528,"status":"passed"},"step":{"line":103,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":11453600,"millis":11.4536,"status":"passed"},"step":{"line":104,"prefix":"And","index":10,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":1008300,"millis":1.0083,"status":"passed"},"step":{"comments":["#And match response.info.cancelUrl != null","## Payment ##","# token 발급"],"line":109,"prefix":"*","index":11,"text":"def path = \"\/v1\/line-users\/\" + mid + \"\/tokens\/issue\""}},{"result":{"nanos":411200,"millis":0.4112,"status":"passed"},"step":{"line":110,"prefix":"Given","index":12,"text":"url baseURI + path"}},{"result":{"nanos":134085900,"millis":134.0859,"status":"passed"},"step":{"line":111,"prefix":"When","index":13,"text":"method GET"}},{"result":{"nanos":14300,"millis":0.0143,"status":"passed"},"step":{"line":112,"prefix":"Then","index":14,"text":"status 200"}},{"result":{"nanos":931900,"millis":0.9319,"status":"passed"},"step":{"line":113,"prefix":"And","index":15,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":5635800,"millis":5.6358,"status":"passed"},"step":{"line":114,"prefix":"And","index":16,"text":"match response.info.requestToken != null"}},{"result":{"nanos":1279700,"millis":1.2797,"status":"passed"},"step":{"line":115,"prefix":"*","index":17,"text":"def requestToken = response.info.requestToken"}},{"result":{"nanos":2513900,"millis":2.5139,"status":"passed"},"step":{"comments":["# RSA KEY 발급 및 password encrypt"],"line":118,"prefix":"*","index":18,"text":"def password = Java.type('Utils.PaymentUtil').getPassword()"}},{"result":{"nanos":672900,"millis":0.6729,"status":"passed"},"step":{"endLine":124,"line":119,"prefix":"*","docString":"{\n  data: #(password)\n}","index":19,"text":"def payload ="}},{"result":{"nanos":375500,"millis":0.3755,"status":"passed"},"step":{"line":125,"prefix":"*","index":20,"text":"def path = \"\/v1\/rsa\/encrypt\""}},{"result":{"nanos":178500,"millis":0.1785,"status":"passed"},"step":{"line":126,"prefix":"Given","index":21,"text":"url baseURI + path"}},{"result":{"nanos":144300,"millis":0.1443,"status":"passed"},"step":{"line":127,"prefix":"And","index":22,"text":"request payload"}},{"result":{"nanos":127441300,"millis":127.4413,"status":"passed"},"step":{"line":128,"prefix":"When","index":23,"text":"method post"}},{"result":{"nanos":27000,"millis":0.027,"status":"passed"},"step":{"line":129,"prefix":"Then","index":24,"text":"status 200"}},{"result":{"nanos":850600,"millis":0.8506,"status":"passed"},"step":{"line":130,"prefix":"And","index":25,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":608900,"millis":0.6089,"status":"passed"},"step":{"line":131,"prefix":"And","index":26,"text":"match response.info.encryptedText != null"}},{"result":{"nanos":499100,"millis":0.4991,"status":"passed"},"step":{"line":132,"prefix":"And","index":27,"text":"match response.info.keyName != null"}},{"result":{"nanos":619600,"millis":0.6196,"status":"passed"},"step":{"line":133,"prefix":"*","index":28,"text":"def password =  response.info.encryptedText"}},{"result":{"nanos":713700,"millis":0.7137,"status":"passed"},"step":{"line":134,"prefix":"*","index":29,"text":"def keyName = response.info.keyName"}},{"result":{"nanos":336900,"millis":0.3369,"status":"passed"},"step":{"comments":["# 본 API 호출"],"line":137,"prefix":"*","index":30,"text":"def path = \"\/v3\/payment\/request\/authorize\""}},{"result":{"nanos":484000,"millis":0.484,"status":"passed"},"step":{"endLine":145,"line":138,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t11.10.2\tAndroid OS\t10\",\n  x-lp-region : \"TW\"\n}","index":31,"text":"def req_header ="}},{"result":{"nanos":1161700,"millis":1.1617,"status":"passed"},"step":{"endLine":164,"line":146,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId),\n  \"keyName\" : #(keyName),\n  \"password\" : #(password),\n  \"requestToken\" : #(requestToken),\n  \"payments\":[{\n      \"amount\":\"539\",\n      \"currency\":\"TWD\",\n      \"method\":\"CREDIT_CARD\",\n      \"lpAccountNo\": #(lpAccountNo)\n   }],\n  \"additionalAgreements\": [{\n    \"type\":\"LINE_PAY_OA\",\n    \"checkYn\" : \"Y\"\n  }]\n}","index":32,"text":"def req_body ="}},{"result":{"nanos":115200,"millis":0.1152,"status":"passed"},"step":{"line":165,"prefix":"Given","index":33,"text":"url baseURI + path"}},{"result":{"nanos":89200,"millis":0.0892,"status":"passed"},"step":{"line":166,"prefix":"And","index":34,"text":"headers req_header"}},{"result":{"nanos":53800,"millis":0.0538,"status":"passed"},"step":{"line":167,"prefix":"And","index":35,"text":"request req_body"}},{"result":{"nanos":228960900,"millis":228.9609,"status":"passed"},"step":{"line":168,"prefix":"When","index":36,"text":"method post"}},{"result":{"nanos":15100,"millis":0.0151,"status":"passed"},"step":{"line":169,"prefix":"Then","index":37,"text":"status 200"}},{"result":{"nanos":431000,"millis":0.431,"status":"passed"},"step":{"line":170,"prefix":"And","index":38,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":667800,"millis":0.6678,"status":"passed"},"step":{"comments":["## Calculate Amount ##"],"line":173,"prefix":"*","index":39,"text":"def path = \"\/v3\/payment\/request\/calculate\""}},{"result":{"nanos":506500,"millis":0.5065,"status":"passed"},"step":{"endLine":180,"line":174,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":40,"text":"def req_header ="}},{"result":{"nanos":270200,"millis":0.2702,"status":"passed"},"step":{"endLine":186,"line":181,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":41,"text":"def req_body ="}},{"result":{"nanos":155300,"millis":0.1553,"status":"passed"},"step":{"line":187,"prefix":"Given","index":42,"text":"url baseURI + path"}},{"result":{"nanos":116100,"millis":0.1161,"status":"passed"},"step":{"line":188,"prefix":"And","index":43,"text":"headers req_header"}},{"result":{"nanos":39900,"millis":0.0399,"status":"passed"},"step":{"line":189,"prefix":"And","index":44,"text":"request req_body"}},{"result":{"nanos":126400100,"millis":126.4001,"status":"passed"},"step":{"line":190,"prefix":"When","index":45,"text":"method post"}},{"result":{"nanos":20400,"millis":0.0204,"status":"passed"},"step":{"line":191,"prefix":"Then","index":46,"text":"status 200"}},{"result":{"nanos":707400,"millis":0.7074,"status":"passed"},"step":{"line":192,"prefix":"And","index":47,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":362200,"millis":0.3622,"status":"passed"},"step":{"line":193,"prefix":"And","index":48,"text":"match response.info.productAmount.amount == amount"}},{"result":{"nanos":5010229400,"millis":5010.2294,"status":"passed"},"step":{"line":194,"prefix":"Then","index":49,"text":"Java.type('Utils.PaymentUtil').pause(5000)"}},{"result":{"nanos":1480800,"millis":1.4808,"status":"passed"},"step":{"comments":["## Get authorization ##"],"line":197,"prefix":"*","index":50,"text":"def path = \"\/v3\/payment\/authorization\/get\""}},{"result":{"nanos":715600,"millis":0.7156,"status":"passed"},"step":{"endLine":204,"line":198,"prefix":"*","docString":"{\n  X-LP-MID: #(mid),\n  X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":51,"text":"def req_header ="}},{"result":{"nanos":865700,"millis":0.8657,"status":"passed"},"step":{"endLine":210,"line":205,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":52,"text":"def req_body ="}},{"result":{"nanos":325000,"millis":0.325,"status":"passed"},"step":{"line":211,"prefix":"Given","index":53,"text":"url baseURI + path"}},{"result":{"nanos":142300,"millis":0.1423,"status":"passed"},"step":{"line":212,"prefix":"And","index":54,"text":"headers req_header"}},{"result":{"nanos":71800,"millis":0.0718,"status":"passed"},"step":{"line":213,"prefix":"And","index":55,"text":"request req_body"}},{"result":{"nanos":439448700,"millis":439.4487,"status":"passed"},"step":{"line":214,"prefix":"When","index":56,"text":"method post"}},{"result":{"nanos":27100,"millis":0.0271,"status":"passed"},"step":{"line":215,"prefix":"Then","index":57,"text":"status 200"}},{"result":{"nanos":650500,"millis":0.6505,"status":"passed"},"step":{"line":216,"prefix":"And","index":58,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":563500,"millis":0.5635,"status":"passed"},"step":{"comments":["## Confirm authorization ##"],"line":219,"prefix":"*","index":59,"text":"def path = \"\/v3\/payment\/authorization\/confirm\""}},{"result":{"nanos":311100,"millis":0.3111,"status":"passed"},"step":{"endLine":226,"line":220,"prefix":"*","docString":"{\n\t\t X-LP-MID : #(mid),\n    X-LP-ClientInfo : \"ANDROID_BETA\t12.18.0\tAndroid OS\t12\"\n}","index":60,"text":"def req_header ="}},{"result":{"nanos":203900,"millis":0.2039,"status":"passed"},"step":{"endLine":232,"line":227,"prefix":"*","docString":"{\n  \"transactionReserveId\" : #(transactionReserveId)\n}","index":61,"text":"def req_body ="}},{"result":{"nanos":158600,"millis":0.1586,"status":"passed"},"step":{"line":233,"prefix":"Given","index":62,"text":"url baseURI + path"}},{"result":{"nanos":91400,"millis":0.0914,"status":"passed"},"step":{"line":234,"prefix":"And","index":63,"text":"headers req_header"}},{"result":{"nanos":75800,"millis":0.0758,"status":"passed"},"step":{"line":235,"prefix":"And","index":64,"text":"request req_body"}},{"result":{"nanos":307345700,"millis":307.3457,"status":"passed"},"step":{"line":236,"prefix":"When","index":65,"text":"method post"}},{"result":{"nanos":19800,"millis":0.0198,"status":"passed"},"step":{"line":237,"prefix":"Then","index":66,"text":"status 200"}},{"result":{"nanos":509600,"millis":0.5096,"status":"passed"},"step":{"line":238,"prefix":"And","index":67,"text":"match response.returnCode == \"0000\""}},{"result":{"nanos":506800,"millis":0.5068,"status":"passed"},"step":{"comments":["## MKTP Confirm Payment ##"],"line":242,"prefix":"*","index":68,"text":"def tempOrderSeq = \"37231\""}},{"result":{"nanos":1325600,"millis":1.3256,"status":"passed"},"step":{"line":243,"prefix":"*","index":69,"text":"def path = \"\/v1\/TW\/order\/\" + tempOrderSeq + \"\/payment\/confirm\""}},{"result":{"nanos":439500,"millis":0.4395,"status":"passed"},"step":{"endLine":249,"line":244,"prefix":"*","docString":"{\n  X-LP-MK-MERCHANT-ID : #(merchantID)\n}","index":70,"text":"def req_header ="}},{"result":{"nanos":131900,"millis":0.1319,"status":"passed"},"step":{"endLine":256,"line":250,"prefix":"*","docString":"{\n \"amount\": 539,\n \"currency\": \"TWD\"\n}","index":71,"text":"text req_body ="}},{"result":{"nanos":965700,"millis":0.9657,"status":"passed"},"step":{"line":257,"prefix":"*","index":72,"text":"def nonce = Java.type('Utils.PaymentUtil').getNonce()"}},{"result":{"nanos":13391000,"millis":13.391,"status":"passed"},"step":{"line":258,"prefix":"*","index":73,"text":"def signature = Java.type('Utils.PaymentUtil').getSignature(channelSecretKey, path, req_body, nonce)"}},{"result":{"nanos":803300,"millis":0.8033,"status":"passed"},"step":{"line":259,"prefix":"Given","index":74,"text":"url mktURI + path"}},{"result":{"nanos":149100,"millis":0.1491,"status":"passed"},"step":{"line":260,"prefix":"And","index":75,"text":"headers req_header"}},{"result":{"nanos":77400,"millis":0.0774,"status":"passed"},"step":{"line":261,"prefix":"And","index":76,"text":"request req_body"}},{"result":{"nanos":2354107700,"millis":2354.1077,"status":"passed"},"step":{"line":262,"prefix":"When","index":77,"text":"method post"}},{"result":{"nanos":25000,"millis":0.025,"status":"passed"},"step":{"line":263,"prefix":"Then","index":78,"text":"status 200"}},{"result":{"nanos":989000,"millis":0.989,"status":"passed"},"step":{"line":264,"prefix":"And","index":79,"text":"match response.resultCode == \"0000\""}}],"executorName":"main","line":28,"name":"Credit card 전액결제 \/ 자동 매입 > 전체환불","description":"","durationMillis":9664.2517,"startTime":1673343609895,"failed":false,"refId":"[1:28]","endTime":1673343619576,"exampleIndex":-1}],"callDepth":0,"name":"MKTP Payment","description":"","resultDate":"2023-01-10 06:40:19 오후","durationMillis":9664.2517,"passedCount":1}